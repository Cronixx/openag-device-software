{% extends 'base.html' %}

{% block javascript %}
<script>
  var images = [] // global image file names

  //--------------------------------------------------------------------------
  window.onload = function() {
    document.getElementById("status").innerHTML = "{{status}}";

    var files_json = document.getElementById("files_json").value;
    var files = JSON.parse(files_json);
    for(i in files) {
      images.push( files[i].name );
    }

    var slideO = document.getElementById("imageSlider");
    slideO.max = images.length - 1;
    slideO.value = images.length - 1; // farthest to the right
    
    var slider = $("#imageSlider");
    slider.on("input change", showImage);
    showImage();
  }

  //--------------------------------------------------------------------------
  function showImage() {
    var slider = $("#imageSlider");
    var img = document.getElementById("image");
    img.src = "/app/static/stored_images/" + images[ slider.val() ];
    var fn = $("#file_name");
    fn.text( images[ slider.val() ] );
  }
</script>
{% endblock %}

{% block content %}
<html>
   <input type="hidden" id="files_json" name="variable" value="{{files_json}}">
   <body>
      <div class="images">
        <h2>Images</h2>
         <div class="card">
            <ul>
              <li><b>status {{ status }}
              <li><b>debugrob:</b> <span id="status"></span>
            </ul>
            <h3 class="text-center"><strong>Slide to see images</strong></h3>

            <form class="range-field">
              <input id="imageSlider" class="no-border w-100" type="range" value="0" min="0" max="0" />
              <span id="file_name" class="text-center"></span>
            </form>

            <!-- debugrob, image stretches, keep aspect square. -->
            <div class="row">
              <img id="image" src="" class="img-thumbnail">
            </div>

         </div>
      </div>
   </body>
</html>
{% endblock %}
